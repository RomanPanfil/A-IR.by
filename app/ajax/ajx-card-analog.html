<div class="ui-block analog">
  <div class="ui-block-head analog-head">
    <div class="ui-block-title">Аналогичные товары</div>
    <div class="analog-other-navigation">
      <div class="analog-button analog-button-prev">
        <svg class="analog-button-icon">
          <use xlink:href="svg/svg/symbols.svg#ui-arrow-prev"/>
        </svg>
      </div>
      <div class="swiper-pagination"></div>
      <div class="analog-button analog-button-next">
        <svg class="analog-button-icon">
          <use xlink:href="svg/svg/symbols.svg#ui-arrow-next"/>
        </svg>
      </div>
    </div>
  </div>
  <div class="analog-cards">
    <div class="analog-card analog-current">
      <div class="analog-card-ticket">Текущий товар</div>
      <a href="#" class="analog-card-img slider-product-img-link">
        <img src="./images/product-img.webp" loading="lazy" alt="product">
      </a>
      <div class="analog-card-info">
        <div class="analog-card-code">
          Код:
          <span class="analog-card-code-code">01020304</span>
        </div>
        <div class="analog-card-title">
          <a href="#" class="analog-card-title-link">Поршневой компрессор Delonghikeran ZZKH9991XF0, 35 бар</a>
        </div>
        <div class="popup-card-str">
          <div class="slider-product-price">
            5 381.00
            <span class="popup-card-price-unit">р.</span>
          </div>
          <a href="#" class="ui-btn popup-card-btn analog-btn__desktop">
            <svg class="sprite popup-card-btn-icon">
              <use xlink:href="svg/svg/symbols.svg#cart"/>
            </svg>
          </a>
        </div>
      </div>
      <div class="analog-params">
        <div class="analog-param">
          <div class="analog-param-title">
            Мощность двигателя
          </div>
          <div class="analog-param-value">
            4 кВт
          </div>
        </div>
        <div class="analog-param">
          <div class="analog-param-title">
            Рабочее давление
          </div>
          <div class="analog-param-value">
            10 бар
          </div>
        </div>
        <div class="analog-param">
          <div class="analog-param-title">
            Производительность
          </div>
          <div class="analog-param-value">
            0.49 м³/мин
          </div>
        </div>
        <div class="analog-param">
          <div class="analog-param-title">
            Осушитель воздуха
          </div>
          <div class="analog-param-value">
            Есть
          </div>
        </div>
        <div class="analog-param">
          <div class="analog-param-title">
            Объем ресивера
          </div>
          <div class="analog-param-value">
            —
          </div>
        </div>
        <a href="#" class="ui-btn popup-card-btn analog-btn__mobile">
          <svg class="sprite popup-card-btn-icon">
            <use xlink:href="svg/svg/symbols.svg#cart"/>
          </svg>
        </a>
      </div>
    </div>
    <div class="analog-other">
      <div class="swiper analog-other-swiper">
        <div class="swiper-wrapper">
          <div class="swiper-slide">
            <div class="analog-card">
              <a href="#" class="analog-card-img slider-product-img-link">
                <img src="https://via.placeholder.com/210x210" loading="lazy" alt="product">
              </a>
              <div class="analog-card-info">
                <div class="analog-card-code">
                  Код:
                  <span class="analog-card-code-code">01020304</span>
                </div>
                <div class="analog-card-title">
                  <a href="#" class="analog-card-title-link">Винтовой компрессор CM, 5 бар</a>
                </div>
                <div class="popup-card-str">
                  <div class="slider-product-price">
                    5 381.00
                    <span class="popup-card-price-unit">р.</span>
                  </div>
                  <a href="#" class="ui-btn popup-card-btn analog-btn__desktop">
                    <svg class="sprite popup-card-btn-icon">
                      <use xlink:href="svg/svg/symbols.svg#cart"/>
                    </svg>
                  </a>
                </div>
              </div>
              <div class="analog-params">
                <div class="analog-param">
                  <div class="analog-param-value">
                    4 кВт
                  </div>
                </div>
                <div class="analog-param">
                  <div class="analog-param-value">
                    10 бар
                  </div>
                </div>
                <div class="analog-param">
                  <div class="analog-param-value">
                    0.49 м³/мин
                  </div>
                </div>
                <div class="analog-param">
                  <div class="analog-param-value">
                    Есть
                  </div>
                </div>
                <div class="analog-param">
                  <div class="analog-param-value">
                    —
                  </div>
                </div>
                <a href="#" class="ui-btn popup-card-btn analog-btn__mobile">
                  <svg class="sprite popup-card-btn-icon">
                    <use xlink:href="svg/svg/symbols.svg#cart"/>
                  </svg>
                </a>
              </div>
            </div>
          </div>
          <div class="swiper-slide">
            <div class="analog-card">
              <a href="#" class="analog-card-img slider-product-img-link">
                <img src="./images/product-img.webp" loading="lazy" alt="product">
              </a>
              <div class="analog-card-info">
                <div class="analog-card-code">
                  Код:
                  <span class="analog-card-code-code">01020304</span>
                </div>
                <div class="analog-card-title">
                  <a href="#" class="analog-card-title-link">Винтовой компрессор A1R BB-4FC, 10 бар</a>
                </div>
                <div class="popup-card-str">
                  <div class="slider-product-price">
                    5 381.00
                    <span class="popup-card-price-unit">р.</span>
                  </div>
                  <a href="#" class="ui-btn popup-card-btn analog-btn__desktop">
                    <svg class="sprite popup-card-btn-icon">
                      <use xlink:href="svg/svg/symbols.svg#cart"/>
                    </svg>
                  </a>
                </div>
              </div>
              <div class="analog-params">
                <div class="analog-param">
                  <div class="analog-param-value">
                    4 кВт
                  </div>
                </div>
                <div class="analog-param">
                  <div class="analog-param-value">
                    10 бар
                  </div>
                </div>
                <div class="analog-param">
                  <div class="analog-param-value">
                    0.49 м³/мин
                  </div>
                </div>
                <div class="analog-param">
                  <div class="analog-param-value">
                    Есть
                  </div>
                </div>
                <div class="analog-param">
                  <div class="analog-param-value">
                    —
                  </div>
                </div>
                <a href="#" class="ui-btn popup-card-btn analog-btn__mobile">
                  <svg class="sprite popup-card-btn-icon">
                    <use xlink:href="svg/svg/symbols.svg#cart"/>
                  </svg>
                </a>
              </div>
            </div>
          </div>
          <div class="swiper-slide">
            <div class="analog-card">
              <a href="#" class="analog-card-img slider-product-img-link">
                <img src="https://via.placeholder.com/210x300/000/FFF" loading="lazy" alt="product">
              </a>
              <div class="analog-card-info">
                <div class="analog-card-code">
                  Код:
                  <span class="analog-card-code-code">01020304</span>
                </div>
                <div class="analog-card-title">
                  <a href="#" class="analog-card-title-link">Винтовой компрессор A1R BB-4FC, 10 бар</a>
                </div>
                <div class="popup-card-str">
                  <div class="slider-product-price">
                    5 381.00
                    <span class="popup-card-price-unit">р.</span>
                  </div>
                  <a href="#" class="ui-btn popup-card-btn analog-btn__desktop">
                    <svg class="sprite popup-card-btn-icon">
                      <use xlink:href="svg/svg/symbols.svg#cart"/>
                    </svg>
                  </a>
                </div>
              </div>
              <div class="analog-params">
                <div class="analog-param">
                  <div class="analog-param-value">
                    4 кВт
                  </div>
                </div>
                <div class="analog-param">
                  <div class="analog-param-value">
                    10 бар
                  </div>
                </div>
                <div class="analog-param">
                  <div class="analog-param-value">
                    0.49 м³/мин
                  </div>
                </div>
                <div class="analog-param">
                  <div class="analog-param-value">
                    Есть
                  </div>
                </div>
                <div class="analog-param">
                  <div class="analog-param-value">
                    —
                  </div>
                </div>
                <a href="#" class="ui-btn popup-card-btn analog-btn__mobile">
                  <svg class="sprite popup-card-btn-icon">
                    <use xlink:href="svg/svg/symbols.svg#cart"/>
                  </svg>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    
    // Аналогичные товары
    (function() {
      function adjustAnalogParamHeights() {
        const currentCard = document.querySelector('.analog-card.analog-current');
        const otherCards = document.querySelectorAll('.analog-card:not(.analog-current)');
      
        if (!currentCard || otherCards.length === 0) return;
      
        const currentParams = currentCard.querySelectorAll('.analog-param');
      
        currentParams.forEach((param, index) => {
          const height = param.getBoundingClientRect().height;
          
          otherCards.forEach(card => {
            const correspondingParam = card.querySelectorAll('.analog-param')[index];
            if (correspondingParam) {
              correspondingParam.style.height = `${height}px`;
            }
          });
        });
      }
      
      // Вызываем функцию при загрузке страницы
      adjustAnalogParamHeights();
      window.addEventListener('load', adjustAnalogParamHeights);
      
      // Вызываем функцию при изменении размера окна
      window.addEventListener('resize', adjustAnalogParamHeights);
    })();

    setTimeout(() => {
      (function(){
          if (!document.querySelector('.analog-other')) return     
            
          let slider = new Swiper(".analog-other-swiper", {
              slidesPerView: 1,
              spaceBetween: 0,   
              pagination: {
                  el: '.swiper-pagination',
                  type: 'custom',
                  renderCustom: function (swiper, current, total) {
                      const visibleSlides = swiper.params.slidesPerView;
                      if (total > visibleSlides) {
                          return `Аналог ${current} из ${total}`;
                      } else {
                          return ''; // Возвращаем пустую строку, если слайдов меньше или равно видимому количеству
                      }
                  },
              },
              navigation: {
                  nextEl: ".analog-button-next",
                  prevEl: ".analog-button-prev",
              },
              breakpoints: {        
                  960: {
                      slidesPerView: 2,
                  },
                  1141: {
                      slidesPerView: 3,
                  },
              },
              on: {
                  init: function () {
                      updatePaginationVisibility(this);
                  },
                  breakpoint: function () {
                      updatePaginationVisibility(this);
                  }
              }
          });

          function updatePaginationVisibility(swiper) {
              const paginationElement = swiper.el.querySelector('.swiper-pagination');
              if (paginationElement) {
                  if (swiper.slides.length > swiper.params.slidesPerView) {
                      paginationElement.style.display = 'block';
                  } else {
                      paginationElement.style.display = 'none';
                  }
              }
          }
        })();
    },500)
  </script>
</div>
